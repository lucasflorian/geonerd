{"version":3,"sources":["app.js","country-nerd.js","flag-nerd.js","navigation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["class GeoNerdApp {\n\tconstructor(props) {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\tthis.countries = {};\n\t\t\tthis.letters = [\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"y\",\"z\"];\n\t\t\tthis.loadCountries(() => {\n\t\t\t\tnew GeoNerdNavigation();\n\t\t\t\tnew CountryNerd();\n\t\t\t\tnew FlagNerd();\n\t\t\t});\n\t\t});\n\t}\n\n\tloadCountries(callback) {\n\t\tconst request = new XMLHttpRequest();\n\t\trequest.overrideMimeType(\"application/json\");\n\t\trequest.open('GET', '/data/countries-fr.json', true);\n\t\trequest.onreadystatechange = () => {\n\t\t\tif (request.readyState === 4 && request.status === 200) {\n\t\t\t\tJSON.parse(request.responseText).forEach(country => {\n\t\t\t\t\tconst letter = GeoNerdApp.sanitize(country.name.substr(0, 1));\n\t\t\t\t\tif (!this.countries[letter]) {\n\t\t\t\t\t\tthis.countries[letter] = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.countries[letter].push({\n\t\t\t\t\t\tsanitize: GeoNerdApp.sanitize(country.name),\n\t\t\t\t\t\tname: country.name,\n\t\t\t\t\t\tcode: country.code\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tconsole.log(\"countries loaded\");\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t\trequest.send(null);\n\t}\n\n\tstatic sanitize(value) {\n\t\treturn value.toLowerCase().normalize(\"NFD\")\n\t\t\t.replace(/[\\u0300-\\u036f]/g, \"\")\n\t\t\t.replace(/-/g, \" \")\n\t\t\t.replace(/'/g, \" \")\n\t\t\t.replace(/â€™/g, \" \");\n\t}\n}\n\nconst geoNerdApp = new GeoNerdApp();\n","class CountryNerd {\n\tconstructor() {\n\t\tconsole.log(\"country nerd\");\n\t\tthis.currentLetter = \"a\";\n\t\tthis.countriesFound = 0;\n\t\tthis.loadCountries();\n\n\t\tthis.firstAnswer = document.querySelector(\".answers .answer\");\n\t\tthis.answers = document.querySelector(\".answers\");\n\t\tthis.answerContainer = document.querySelector(\".answer-container\");\n\t\tthis.answerInput = document.querySelector(\"#country-answer-input\");\n\t\tthis.answerButton = document.querySelector(\"#country-answer-validate\");\n\t\tthis.letters = document.querySelectorAll(\".letter\");\n\t\tthis.wonLink = document.querySelector(\".won-link\");\n\t\tthis.tipCurrent = document.querySelector(\".tip .found\");\n\t\tthis.tipTotal = document.querySelector(\".tip .total\");\n\n\t\tthis.buildLetters();\n\t\tthis.buildInputs();\n\t}\n\n\tbuildLetters() {\n\t\tconst letterPlaceholder = document.querySelector(\".letter-placeholder\");\n\t\tconst mainTitle = document.querySelector(\".country-nerd h1\");\n\t\tconst gameTitle = document.querySelector(\".game-title\");\n\t\tconst lettersContainer = document.querySelector(\".letters\");\n\n\t\tthis.letters.forEach(letter => {\n\t\t\tconst letterText = letter.innerHTML.toLowerCase();\n\t\t\tif (localStorage.getItem(\"countrynerd.letter.\" + letterText) === \"true\") {\n\t\t\t\tletter.classList.add(\"completed\");\n\t\t\t}\n\t\t\tletter.addEventListener(\"click\", () => {\n\t\t\t\tthis.currentLetter = letterText;\n\t\t\t\tlocation.hash = \"#country-nerd-\" + letterText;\n\t\t\t\tlettersContainer.classList.add(\"hide\");\n\t\t\t\tgsap.to(mainTitle, {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tpointerEvents: \"none\",\n\t\t\t\t\tdelay: 0.2\n\t\t\t\t});\n\t\t\t\tgsap.to(gameTitle, {\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tdelay: 0.5\n\t\t\t\t});\n\t\t\t\tletterPlaceholder.innerHTML = letterText;\n\t\t\t\tthis.tipTotal.innerHTML = geoNerdApp.countries[this.currentLetter].length;\n\t\t\t\tthis.firstAnswer.innerHTML = letterText;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tlettersContainer.style.display = \"none\";\n\t\t\t\t\tthis.answerContainer.style.display = \"flex\";\n\t\t\t\t\tgsap.to(this.answerContainer, {\n\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\tdelay: 0.1\n\t\t\t\t\t});\n\t\t\t\t\tthis.answerInput.focus();\n\t\t\t\t}, 400);\n\t\t\t});\n\t\t});\n\t}\n\n\tloadCountries() {\n\n\t}\n\n\tbuildInputs() {\n\t\tthis.answerInput.addEventListener(\"change\", e => {\n\t\t\tthis.validateAnswer(e.target.value);\n\t\t});\n\t\tthis.answerButton.addEventListener(\"click\", e => {\n\t\t\tthis.validateAnswer(this.answerInput.value);\n\t\t});\n\t}\n\n\tvalidateAnswer(answer) {\n\t\tanswer = GeoNerdApp.sanitize(answer);\n\t\tlet win = false;\n\t\tgeoNerdApp.countries[this.currentLetter].forEach(country => {\n\t\t\tif (answer === country.sanitize && !country.found) {\n\t\t\t\twin = true;\n\t\t\t\tthis.answerInput.value = \"\";\n\t\t\t\tcountry.found = true;\n\t\t\t\tconst rightAnswer = document.querySelector(\".answers .answer:first-child\");\n\t\t\t\trightAnswer.innerHTML = `${country.name}<span class=\"flag ${country.code}\"></span>`;\n\t\t\t\trightAnswer.classList.add(\"valid\");\n\t\t\t\tthis.countriesFound++;\n\t\t\t\tthis.tipCurrent.innerHTML = this.countriesFound;\n\t\t\t\tif (this.countriesFound === geoNerdApp.countries[this.currentLetter].length) {\n\t\t\t\t\tthis.finished = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (win) {\n\t\t\tif (this.finished) {\n\t\t\t\tthis.wonLink.classList.add(\"show\");\n\t\t\t\tthis.answerContainer.classList.add(\"win\");\n\t\t\t\tlocalStorage.setItem(\"countrynerd.letter.\" + this.currentLetter, \"true\");\n\t\t\t} else {\n\t\t\t\tthis.answers.insertAdjacentHTML(\"afterbegin\", `<div class=\"answer\">${this.currentLetter}</div>`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.answerInput.value = \"\";\n\t\t}\n\t}\n\n\n}\n","class FlagNerd {\n\tconstructor() {\n\t\tconst flagsContainer = document.querySelector(\".flags-container\");\n\t\tgeoNerdApp.letters.forEach(letter => {\n\t\t\tgeoNerdApp.countries[letter].forEach(country => {\n\t\t\t\tflagsContainer.insertAdjacentHTML(\"afterbegin\", `<span class=\"flag ${country.code}\"></span>`);\n\t\t\t});\n\t\t});\n\n\t}\n}\n","class GeoNerdNavigation {\n\tconstructor() {\n\t\tthis.pages = document.querySelectorAll(\".pages .page\");\n\n\t\tthis.changePage();\n\n\t\twindow.addEventListener(\"hashchange\", e => {\n\t\t\tthis.changePage();\n\t\t});\n\t}\n\n\tchangePage() {\n\t\tlet navTo = location.hash;\n\t\tif (!navTo){\n\t\t\tnavTo = \"home\";\n\t\t}\n\t\tconst nextPage = document.querySelector(navTo);\n\t\tif (nextPage) {\n\t\t\tthis.pages.forEach(page => {\n\t\t\t\tpage.classList.remove(\"active\");\n\t\t\t});\n\t\t\tnextPage.classList.add(\"active\");\n\t\t}\n\t}\n}\n"]}